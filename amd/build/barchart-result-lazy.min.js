define(["jquery","core/log","mod_livepoll/result","core/chartjs-lazy"],function(a,b,c,d){function e(){return c.call(this),this._initialized=!1,this._chartType="bar",this}return e.prototype=Object.create(c.prototype),e.prototype.initChart=function(c){var e=document.getElementById("livepoll-chart").getContext("2d"),f=[],g=[];a.each(c,function(a,b){f.push(b),g.push(0)}),this._chart=new d(e,{type:this._chartType,data:{labels:f,datasets:[{label:"Votes",data:g}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),b.debug("Bar chart initialized!")},e.prototype.performUpdate=function(b,c,d){var e=this;e._initialized||(e.initChart(b),e._initialized=!0),e._chart.data.datasets[0].data=[],a.each(b,function(a){e._chart.data.datasets[0].data.push(c[a])}),e._chart.update(),d()},e});